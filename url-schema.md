## Schema

Thumbnails are stored in Google Cloud buckets according to the following
scheme. Let X be an artist UID, and let Y be an artwork UID. Also, let Z be a
slug (i.e., brief, URL-safe string) that describes the source of the artwork,
i.e., from which internal tool or external third-party it was obtained. Then the
original (high quality) image is stored at

    https://storage.googleapis.com/art-uploads/Z/X/uploads/Y

Changing `uploads` to `thumb128` or `thumb512` directs to a resized image having
width 128 or 512 pixels, respectively, preserving the original aspect ratio.
Using a template style, the URL schema is

    https://storage.googleapis.com/art-uploads/{source}/{artist UID}/{image size}/{artwork UID}

E.g., for the artwork with UID -KPCTx19sL8L97eqfnnZ by artist with UID
40qcVX8wk7MvfRCnh86VJKd6Ev22, which was uploaded using the artist portal, the
512 thumbnail can be obtained from https://storage.googleapis.com/art-uploads/portal/40qcVX8wk7MvfRCnh86VJKd6Ev22/thumb512/-KPCTx19sL8L97eqfnnZ


## Discussion

At the time of writing (6 Dec 2016), the thumbnails are primarily generated by a
daemon running on a GCE instance, using image_daemon.js in the Tekuma source
repository at https://github.com/tekuma/artist-portal-image-daemon

The source slug "portal" refers to the artist portal at https://artist.tekuma.io/

Since artwork UIDs are globally unique, they are indeed sufficient for creating
unique URLs to refer to thumbnails. However, the redundancy of including the
artist adds some robustness and provides a convenient reference within the URL,
e.g., searching for other work by the same artist only requires the URL, without
the cost of first performing a reverse look-up using the artwork UID.
